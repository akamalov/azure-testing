- name: Test azure_rm_networkinterface_facts
  hosts: all
  connection: local
  vars:
      resource_group: Testing
      playbook_debug: yes
  tasks:
#      - name: Create resource group 
#        azure_rm_resourcegroup:
#            name: "{{ resource_group }}" 
#            location: westus
#
#      - name: Create virtual network
#        azure_rm_virtualnetwork:
#            resource_group: "{{ resource_group }}"
#            name: vnet1001
#            address_prefixes_cidr: "10.10.0.0/16"
#
#      - name: Create subnet
#        azure_rm_subnet:
#            resource_group: "{{ resource_group }}"
#            virtual_network: vnet1001
#            name: subnet1001
#            address_prefix_cidr: "10.10.0.0/24"
#
#      - name: Create security group
#        azure_rm_securitygroup:
#            resource_group: "{{ resource_group }}"
#            name: secgroup1001
#
#      - name: Create network interface
#        azure_rm_networkinterface:
#            resource_group: "{{ resource_group }}"
#            name: nic1001
#            virtual_network: vnet1001
#            subnet: subnet1001
#            security_group: secgroup1001 
#
      - name: Get network interface facts
        azure_rm_networkinterface_facts:
            resource_group: "{{ resource_group }}"
            name: nic1001
        register: output

      - debug: var=output
        when: playbook_debug
    
      - assert:
            that:
                - output.results | length == 1 

#      - name: Get all network interface facts
#        azure_rm_networkinterface_facts:
#            resource_group: "{{ resource_group }}"
#        register: output
#
#      - debug: var=output
#        when: playbook_debug
#    
#      - assert:
#            that:
#                - output.results | length >= 1 
